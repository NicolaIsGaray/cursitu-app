<!-- Vista de Tareas del Estudiante -   -->
<main>
  <div class="main-content">
    <!-- Header -->
    <div class="top-header">
      <h1>¡BIENVENIDO ESTUDIANTE!</h1>
      <div class="user-profile">
        <div class="user-icon" (click)="goToHome()">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
            <circle cx="12" cy="7" r="4"></circle>
          </svg>
          <span class="status-dot active"></span>
        </div>
      </div>
    </div>

    <!-- Dropdown principal "Tareas" -->
    <div class="tasks-dropdown">
      <div class="dropdown-header" (click)="toggleTasksDropdown()">
        <span>Tareas</span>
        <svg class="dropdown-arrow" [class.expanded]="isTasksExpanded" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <polyline points="6 9 12 15 18 9"></polyline>
        </svg>
      </div>

      <!-- Contenido cuando está expandido -->
      <div class="tasks-content" *ngIf="isTasksExpanded">
        <!-- Tarjetas de materias -->
        <div class="subjects-grid">
          <div class="subject-card" *ngFor="let subject of subjects" [class]="'color-' + subject.color">
            <div class="subject-header" (click)="toggleSubject(subject)">
              <div class="subject-info">
                <h3>{{ subject.name }}</h3>
                <p>Año: {{ subject.year }}</p>
                <p>Comisión: {{ subject.commission }}</p>
              </div>
              <svg class="subject-arrow" [class.expanded]="subject.isExpanded" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="6 9 12 15 18 9"></polyline>
              </svg>
            </div>
          </div>
        </div>

        <!-- Lista de trabajos prácticos/tareas -->
        <div class="assignments-list">
          <div class="assignment-item" *ngFor="let assignment of assignments">
            <!-- Ícono PDF/Excel -->
            <div class="file-icon" [class.pdf]="assignment.fileType === 'pdf'" [class.excel]="assignment.fileType === 'excel'">
              <span *ngIf="assignment.fileType === 'pdf'">PDF</span>
              <span *ngIf="assignment.fileType === 'excel'">XLS</span>
            </div>

            <!-- Info de la tarea -->
            <div class="assignment-info">
              <h4>{{ assignment.title }}</h4>
              <p>Fecha entrega: {{ assignment.dueDate }}</p>
            </div>

            <!-- Estado -->
            <div class="assignment-status" [class]="assignment.status">
              <span>Estado:</span>
              <span class="status-badge">{{ assignment.status.toUpperCase() }}</span>
            </div>

            <!-- Botón de acción  el estado -->
            <div class="assignment-action">
              <!-- Si está PENDIENTE: botón para AGREGAR ENTREGA -->
              <div class="upload-section" *ngIf="assignment.status === 'pendiente'">
                <button class="btn-upload" (click)="fileInput.click()">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="6 9 12 3 18 9"></polyline>
                    <line x1="12" y1="3" x2="12" y2="15"></line>
                  </svg>
                  AGREGAR ENTREGA
                </button>
                <input #fileInput type="file" (change)="onFileSelected($event)" accept=".pdf,.xlsx,.xls" style="display: none">
                <div class="file-info">
                  <p>SUBIR ARCHIVO</p>
                  <p class="file-limit">Capacidad Máxima: 10mb</p>
                  <p class="file-formats">Formatos permitidos: PDF, XLSX</p>
                </div>
              </div>

              <!-- Si está ENTREGADO: botón para QUITAR ENTREGA -->
              <button class="btn-remove" *ngIf="assignment.status === 'entregado'" (click)="quitarEntrega(assignment)">
                QUITAR ENTREGA
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Sidebar de Estudiantes -->
  <div class="students-sidebar">
    <div class="sidebar-header">
      <span>Estudiantes</span>
      <svg class="expand-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <polyline points="9 18 15 12 9 6"></polyline>
      </svg>
    </div>

    <div class="students-list">
      <div class="student-item" *ngFor="let student of students">
        <div class="student-avatar">{{ student.initial }}</div>
        <span class="student-name">{{ student.name }}</span>
        <span class="status-indicator" [class.active]="student.isActive"></span>
      </div>
    </div>
  </div>
</main>
